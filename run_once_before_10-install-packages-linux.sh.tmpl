{{ if (eq .chezmoi.os "linux") -}}
#!/bin/bash

set -eufo pipefail

repositories=()
packages=(
	curl
	build-essential
	ripgrep
	jq
	zsh
	python3
	python3-pip
)

pythonpkgs=(
	virtualenvwrapper
)

{{ if (eq .chezmoi.osRelease.id "debian" "ubuntu") -}}

# install poetry using python3 (fails with python i.e. python2)
curl -sSL https://raw.githubusercontent.com/python-poetry/poetry/master/install-poetry.py | python3 -

{{ end -}}

# install apt packages:
for repository in ${repositories[@]}; do
	sudo add-apt-repository -y $repository
done
sudo apt update
sudo apt install -y ${packages[@]}

# install python packages:
pip3 install ${pythonpkgs[@]}

{{ end -}}
